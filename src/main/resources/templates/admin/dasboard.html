<!-- meta tags and other links -->
<!DOCTYPE html>
<html lang="en" data-theme="light">


<!-- Mirrored from wowdash.wowtheme7.com/demo/index-3.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Nov 2025 02:06:08 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="icon" type="image/png" href="assets/images/favicon.png" sizes="16x16">
    <!-- common css import -->
    <div th:replace="common/admin/css :: css"></div>
</head>

<body>

<!-- Theme Customization Structure Start -->
<div class="body-overlay"></div>

<button type="button"
        class="theme-customization__button w-48-px h-48-px bg-primary-600 text-white rounded-circle d-flex justify-content-center align-items-center position-fixed end-0 bottom-0 mb-40 me-40 text-2xxl bg-hover-primary-700">
    <i class="ri-settings-3-line animate-spin"></i>
</button>
<div class="theme-customization-sidebar w-100 bg-base h-100vh overflow-y-auto position-fixed end-0 top-0 shadow-lg">
    <div class="d-flex align-items-center gap-3 py-16 px-24 justify-content-between border-bottom">
        <div>
            <h6 class="text-sm dark:text-white">Theme Settings</h6>
            <p class="text-xs mb-0 text-neutral-500 dark:text-neutral-200">Customize and preview instantly</p>
        </div>
        <button data-slot="button"
                class="theme-customization-sidebar__close text-neutral-900 bg-transparent text-hover-primary-600 d-flex text-xl">
            <i class="ri-close-fill"></i>
        </button>
    </div>

    <div class="d-flex flex-column gap-48 p-24 overflow-y-auto flex-grow-1">

        <div class="theme-setting-item">
            <h6 class="fw-medium text-primary-light text-md mb-3">Theme Mode</h6>
            <div class="d-grid grid-cols-3 gap-3 dark-light-mode">
                <button type="button"
                        class="theme-btn theme-setting-item__btn d-flex align-items-center justify-content-center h-64-px rounded-3 text-xl active"
                        data-theme="light">
                    <i class="ri-sun-line"></i>
                </button>
                <button type="button"
                        class="theme-btn theme-setting-item__btn d-flex align-items-center justify-content-center h-64-px rounded-3 text-xl"
                        data-theme="dark">
                    <i class="ri-moon-line"></i>
                </button>
                <button type="button"
                        class="theme-btn theme-setting-item__btn d-flex align-items-center justify-content-center h-64-px rounded-3 text-xl"
                        data-theme="system">
                    <i class="ri-computer-line"></i>
                </button>
            </div>
        </div>

        <div class="theme-setting-item">
            <h6 class="fw-medium text-primary-light text-md mb-3">Page Direction</h6>
            <div class="d-grid grid-cols-2 gap-3">
                <button type="button"
                        class="theme-setting-item__btn ltr-mode-btn d-flex align-items-center justify-content-center gap-2 h-56-px rounded-3 text-xl">
                    <span><i class="ri-align-item-left-line"></i></span>
                    <span class="h6 text-sm font-medium mb-0">LTR</span>
                </button>

                <button type="button"
                        class="theme-setting-item__btn rtl-mode-btn d-flex align-items-center justify-content-center gap-2 h-56-px rounded-3 text-xl">
                    <span class="h6 text-sm font-medium mb-0">RTL</span>
                    <span><i class="ri-align-item-right-line"></i></span>
                </button>
            </div>
        </div>

        <div class="theme-setting-item">
            <h6 class="fw-medium text-primary-light text-md mb-3">Color Schema</h6>
            <div class="d-grid grid-cols-3 gap-3">
                <button type="button"
                        class="color-picker-btn d-flex flex-column justify-content-center align-items-center"
                        data-color="blue">
                    <span class="color-picker-btn__box h-40-px w-100 rounded-3"
                          style="background-color: #2563eb;"></span>
                    <span class="fw-medium mt-1" style="color: #2563eb;">Blue</span>
                </button>
                <button type="button"
                        class="color-picker-btn d-flex flex-column justify-content-center align-items-center"
                        data-color="red">
                    <span class="color-picker-btn__box h-40-px w-100 rounded-3"
                          style="background-color: #dc2626;"></span>
                    <span class="fw-medium mt-1" style="color: #dc2626;">Red</span>
                </button>
                <button type="button"
                        class="color-picker-btn d-flex flex-column justify-content-center align-items-center"
                        data-color="green">
                    <span class="color-picker-btn__box h-40-px w-100 rounded-3"
                          style="background-color: #16a34a;"></span>
                    <span class="fw-medium mt-1" style="color: #16a34a;">Green</span>
                </button>
                <button type="button"
                        class="color-picker-btn d-flex flex-column justify-content-center align-items-center"
                        data-color="yellow">
                    <span class="color-picker-btn__box h-40-px w-100 rounded-3"
                          style="background-color: #ff9f29;"></span>
                    <span class="fw-medium mt-1" style="color: #ff9f29;">Yellow</span>
                </button>
                <button type="button"
                        class="color-picker-btn d-flex flex-column justify-content-center align-items-center"
                        data-color="cyan">
                    <span class="color-picker-btn__box h-40-px w-100 rounded-3"
                          style="background-color: #00b8f2;"></span>
                    <span class="fw-medium mt-1" style="color: #00b8f2;">Cyan</span>
                </button>
                <button type="button"
                        class="color-picker-btn d-flex flex-column justify-content-center align-items-center"
                        data-color="violet">
                    <span class="color-picker-btn__box h-40-px w-100 rounded-3"
                          style="background-color: #7c3aed;"></span>
                    <span class="fw-medium mt-1" style="color: #7c3aed;">Violet</span>
                </button>
            </div>
        </div>

    </div>
</div>
<!-- Theme Customization Structure End -->
<div th:replace="common/admin/sidebar :: sidebar"></div>

<main class="dashboard-main">
    <div th:replace="common/admin/header :: header"></div>

    <div class="dashboard-main-body">

        <div class="d-flex flex-wrap align-items-center justify-content-between gap-3" style="margin-bottom: 10px;">
            <h6 class="fw-semibold mb-0" style="font-size: 18px;">Dashboard</h6>
            <ul class="d-flex align-items-center gap-2" style="margin-bottom: 0; font-size: 13px;">
                <li class="fw-medium">
                    <a href="index.html" class="d-flex align-items-center gap-1 hover-text-primary">
                        <iconify-icon icon="solar:home-smile-angle-outline" class="icon text-lg"></iconify-icon>
                        Dashboard
                    </a>
                </li>
                <li>-</li>
                <li class="fw-medium">eCommerce</li>
            </ul>
        </div>

        <div class="row" style="gap: 8px 0; margin-bottom: 0;">
            <div class="col-xxl-12">
                <div class="card radius-8 border-0" style="margin-bottom: 8px;">
                    <div class="card-body" style="padding: 10px 16px;">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center gap-2">
                                <span class="w-36-px h-36-px text-success bg-success-light border border-success-light-white flex-shrink-0 d-flex justify-content-center align-items-center radius-8" style="display: inline-flex; width: 36px; height: 36px;">
                                    <iconify-icon icon="solar:dollar-minimalistic-bold" class="icon" style="font-size: 18px;"></iconify-icon>
                                </span>
                                <div>
                                    <span class="d-block mb-0 fw-medium text-secondary-light" style="font-size: 12px;">Revenue</span>
                                    <h6 class="fw-semibold text-primary-light mb-0" style="font-size: 18px;" id="revenueAmount" th:text="|${#numbers.formatDecimal(revenueData.revenue, 0, 'COMMA', 2, 'POINT')} $|">0.00 $</h6>
                                </div>
                            </div>
                            <div class="d-flex align-items-center gap-2">
                                <div>
                                    <p class="text-sm mb-0" style="font-size: 11px; text-align: right;" id="revenueLabel" th:text="${revenueData.label}">Current month total</p>
                                </div>
                                <select class="form-select form-select-sm w-auto bg-base border text-secondary-light radius-8" 
                                        id="revenuePeriod" style="font-size: 11px; padding: 5px 10px; min-width: 90px;"
                                        th:data-period="${period}"
                                        onchange="var period = this.getAttribute('data-period'); window.location.href='/admin/dashboard?period=' + period + '&revenuePeriod=' + this.value;">
                                    <option value="today" th:selected="${revenuePeriod == 'today'}">Today</option>
                                    <option value="monthly" th:selected="${revenuePeriod == 'monthly'}">Monthly</option>
                                    <option value="yearly" th:selected="${revenuePeriod == 'yearly'}">Yearly</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-12">
                <div class="card radius-8 border-0" style="margin-bottom: 8px;">
                    <div class="row">
                        <div class="col-xxl-6 pe-xxl-0">
                            <div class="card-body" style="padding: 14px 18px;">
                                <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-2">
                                    <h6 class="mb-0 fw-bold" style="font-size: 16px;">Order Status Distribution</h6>
                                    <div class="">
                                        <select class="form-select form-select-sm w-auto bg-base border text-secondary-light radius-8" 
                                                style="font-size: 11px; padding: 4px 8px;"
                                                onchange="window.location.href='/admin/dashboard?period=' + this.value + '&revenuePeriod=' + document.getElementById('revenuePeriod').value">
                                            <option value="yearly" th:selected="${period == 'yearly'}">Yearly</option>
                                            <option value="monthly" th:selected="${period == 'monthly'}">Monthly</option>
                                            <option value="weekly" th:selected="${period == 'weekly'}">Weekly</option>
                                            <option value="today" th:selected="${period == 'today'}">Today</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="margin-top: 8px;">
                                    <div id="orderStatusPieChart" class="margin-16-minus"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-6">
                            <div class="card-body" style="padding: 14px 18px;">
                                <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-2">
                                    <h6 class="mb-0 fw-bold" style="font-size: 16px;">Revenue by Category</h6>
                                    <div class="">
                                        <select class="form-select form-select-sm w-auto bg-base border text-secondary-light radius-8" 
                                                style="font-size: 11px; padding: 4px 8px;"
                                                onchange="window.location.href='/admin/dashboard?period=' + this.value + '&revenuePeriod=' + document.getElementById('revenuePeriod').value">
                                            <option value="yearly" th:selected="${period == 'yearly'}">Yearly</option>
                                            <option value="monthly" th:selected="${period == 'monthly'}">Monthly</option>
                                            <option value="weekly" th:selected="${period == 'weekly'}">Weekly</option>
                                            <option value="today" th:selected="${period == 'today'}">Today</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="margin-top: 8px;">
                                    <div id="revenueByCategoryPieChart" class="margin-16-minus"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-12">
                <div class="card radius-8 border-0" style="margin-bottom: 8px;">
                    <div class="row h-100 g-0">
                        <div class="col-6 p-0 m-0">
                            <div class="card-body h-100 d-flex flex-column justify-content-center border border-top-0" style="padding: 8px 12px;">
                                <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-0">
                                    <div>
                                        <span class="w-30-px h-30-px text-primary-600 bg-primary-light border border-primary-light-white flex-shrink-0 d-flex justify-content-center align-items-center radius-8 mb-0" style="display: inline-flex; margin-bottom: 3px; width: 30px; height: 30px;">
                                            <iconify-icon icon="fa-solid:box-open" class="icon" style="font-size: 14px;"></iconify-icon>  
                                        </span>
                                        <span class="d-block mb-0 fw-medium text-secondary-light" style="font-size: 10px;">Total Products</span>
                                        <h6 class="fw-semibold text-primary-light mb-0" style="font-size: 14px;" th:text="${totalProducts}">0</h6>
                                    </div>
                                </div>
                                <p class="text-sm mb-0" style="font-size: 9px; margin-top: 2px;">Increase by <span
                                        th:classappend="${productChange >= 0} ? 'bg-success-focus text-success-main' : 'bg-danger-focus text-danger-main'"
                                        class="px-1 rounded-2 fw-medium"
                                        style="font-size: 9px;"
                                        th:text="|${productChange >= 0 ? '+' : ''}${productChange}|">+0</span>
                                    this week</p>
                            </div>
                        </div>
                        <div class="col-6 p-0 m-0">
                            <div class="card-body h-100 d-flex flex-column justify-content-center border border-top-0 border-start-0 border-end-0" style="padding: 8px 12px;">
                                <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-0">
                                    <div>
                                        <span class="w-30-px h-30-px text-yellow bg-yellow-light border border-yellow-light-white flex-shrink-0 d-flex justify-content-center align-items-center radius-8 mb-0" style="display: inline-flex; margin-bottom: 3px; width: 30px; height: 30px;">
                                            <iconify-icon icon="flowbite:users-group-solid" class="icon" style="font-size: 14px;"></iconify-icon>
                                        </span>
                                        <span class="d-block mb-0 fw-medium text-secondary-light" style="font-size: 10px;">Total Customer</span>
                                        <h6 class="fw-semibold text-primary-light mb-0" style="font-size: 14px;" th:text="${totalCustomers}">0</h6>
                                    </div>
                                </div>
                                <p class="text-sm mb-0" style="font-size: 9px; margin-top: 2px;">Increase by <span
                                        th:classappend="${customerChange >= 0} ? 'bg-success-focus text-success-main' : 'bg-danger-focus text-danger-main'"
                                        class="px-1 rounded-2 fw-medium"
                                        style="font-size: 9px;"
                                        th:text="|${customerChange >= 0 ? '+' : ''}${customerChange}|">+0</span>
                                    this week</p>
                            </div>
                        </div>
                        <div class="col-6 p-0 m-0">
                            <div class="card-body h-100 d-flex flex-column justify-content-center border border-top-0 border-bottom-0" style="padding: 8px 12px;">
                                <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-0">
                                    <div>
                                        <span class="w-30-px h-30-px text-lilac bg-lilac-light border border-lilac-light-white flex-shrink-0 d-flex justify-content-center align-items-center radius-8 mb-0" style="display: inline-flex; margin-bottom: 3px; width: 30px; height: 30px;">
                                            <iconify-icon icon="majesticons:shopping-cart" class="icon" style="font-size: 14px;"></iconify-icon>
                                        </span>
                                        <span class="d-block mb-0 fw-medium text-secondary-light" style="font-size: 10px;">Total Orders</span>
                                        <h6 class="fw-semibold text-primary-light mb-0" style="font-size: 14px;" th:text="${totalOrders}">0</h6>
                                    </div>
                                </div>
                                <p class="text-sm mb-0" style="font-size: 9px; margin-top: 2px;">Increase by <span
                                        th:classappend="${orderChange >= 0} ? 'bg-success-focus text-success-main' : 'bg-danger-focus text-danger-main'"
                                        class="px-1 rounded-2 fw-medium"
                                        style="font-size: 9px;"
                                        th:text="|${orderChange >= 0 ? '+' : ''}${orderChange}|">+0</span>
                                    this week</p>
                            </div>
                        </div>
                        <div class="col-6 p-0 m-0">
                            <div class="card-body h-100 d-flex flex-column justify-content-center border border-top-0 border-start-0 border-end-0 border-bottom-0" style="padding: 8px 12px;">
                                <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-0">
                                    <div>
                                        <span class="w-30-px h-30-px text-pink bg-pink-light border border-pink-light-white flex-shrink-0 d-flex justify-content-center align-items-center radius-8 mb-0" style="display: inline-flex; margin-bottom: 3px; width: 30px; height: 30px;">
                                            <iconify-icon icon="ri:discount-percent-fill" class="icon" style="font-size: 14px;"></iconify-icon>
                                        </span>
                                        <span class="d-block mb-0 fw-medium text-secondary-light" style="font-size: 10px;">Total Sales</span>
                                        <h6 class="fw-semibold text-primary-light mb-0" style="font-size: 14px;" th:text="|${#numbers.formatDecimal(totalSales, 0, 'COMMA', 2, 'POINT')} $|">0.00 $</h6>
                                    </div>
                                </div>
                                <p class="text-sm mb-0" style="font-size: 9px; margin-top: 2px;">Increase by <span
                                        th:classappend="${periodStats.salesChangePercent >= 0} ? 'bg-success-focus text-success-main' : 'bg-danger-focus text-danger-main'"
                                        class="px-1 rounded-2 fw-medium"
                                        style="font-size: 9px;"
                                        th:text="|${periodStats.salesChangePercent >= 0 ? '+' : ''}${#numbers.formatDecimal(periodStats.salesChangePercent, 1, 'POINT', 1, 'POINT')}%|">+0%</span>
                                    this period</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-9 col-lg-6">
                <div class="card h-100" style="margin-bottom: 8px;">
                    <div class="card-body" style="padding: 10px 14px;">
                        <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-1">
                            <h6 class="mb-0 fw-bold" style="font-size: 14px;">Recent Orders</h6>
                            <a th:href="@{/admin/orders(page=0, size=6, sortBy='userId', sortDir='asc')}"
                               class="text-primary-600 hover-text-primary d-flex align-items-center gap-1" style="font-size: 10px;">
                                View All
                                <iconify-icon icon="solar:alt-arrow-right-linear" class="icon"></iconify-icon>
                            </a>
                        </div>
                        <div class="mb-1" style="margin-top: 4px;">
                            <div id="monthlyOrdersChart" style="height: 180px;"></div>
                        </div>
                        <div class="table-responsive scroll-sm">
                            <table class="table bordered-table mb-0" style="font-size: 13px;">
                                <thead>
                                <tr>
                                    <th scope="col" style="padding: 10px 8px;">Users</th>
                                    <th scope="col" style="padding: 10px 8px;">Invoice</th>
                                    <th scope="col" style="padding: 10px 8px;">Items</th>
                                    <th scope="col" style="padding: 10px 8px;">Qty</th>
                                    <th scope="col" style="padding: 10px 8px;">Amount</th>
                                    <th scope="col" class="text-center" style="padding: 10px 8px;">Status</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="order : ${recentOrders}">
                                    <td style="padding: 10px 8px;">
                                        <div class="d-flex align-items-center">
                                            <span class="text-secondary-light fw-semibold flex-grow-1" style="font-size: 13px;" th:text="${order.user != null ? (order.user.fullName != null ? order.user.fullName : order.user.username) : 'Guest'}">User</span>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px;" th:text="|#${order.orderId}|">#0</td>
                                    <td style="padding: 10px 8px;">
                                        <span th:if="${order.orderItems != null and !order.orderItems.isEmpty()}" 
                                              th:text="${order.orderItems.size() == 1 ? order.orderItems[0].book.title : (order.orderItems.size() + ' items')}">Items</span>
                                        <span th:if="${order.orderItems == null or order.orderItems.isEmpty()}">No items</span>
                                    </td>
                                    <td style="padding: 10px 8px;">
                                        <span th:if="${order.orderItems != null and !order.orderItems.isEmpty()}">
                                            <span th:each="item, iterStat : ${order.orderItems}" th:if="${iterStat.first}">
                                                <span th:text="${#aggregates.sum(order.orderItems.![quantity])}">0</span>
                                            </span>
                                        </span>
                                        <span th:if="${order.orderItems == null or order.orderItems.isEmpty()}">0</span>
                                    </td>
                                    <td style="padding: 10px 8px;" th:text="|${#numbers.formatDecimal(order.totalAmount != null ? order.totalAmount : 0, 0, 'COMMA', 2, 'POINT')} $|">0.00 $</td>
                                    <td class="text-center" style="padding: 10px 8px;">
                                        <span th:if="${order.status != null and order.status.toLowerCase() == 'pending'}"
                                              class="bg-warning-focus text-warning-main px-24 py-4 rounded-pill fw-medium text-sm">Pending</span>
                                        <span th:if="${order.status != null and order.status.toLowerCase() == 'processing'}"
                                              class="bg-info-focus text-info-main px-24 py-4 rounded-pill fw-medium text-sm">Processing</span>
                                        <span th:if="${order.status != null and order.status.toLowerCase() == 'shipped'}"
                                              class="bg-info-focus text-info-main px-24 py-4 rounded-pill fw-medium text-sm">Shipped</span>
                                        <span th:if="${order.status != null and order.status.toLowerCase() == 'delivered'}"
                                              class="bg-success-focus text-success-main px-24 py-4 rounded-pill fw-medium text-sm">Delivered</span>
                                        <span th:if="${order.status != null and order.status.toLowerCase() == 'cancelled'}"
                                              class="bg-danger-focus text-danger-main px-24 py-4 rounded-pill fw-medium text-sm">Cancelled</span>
                                        <span th:if="${order.status == null or (order.status != null and order.status.toLowerCase() != 'pending' and order.status.toLowerCase() != 'processing' and order.status.toLowerCase() != 'shipped' and order.status.toLowerCase() != 'delivered' and order.status.toLowerCase() != 'cancelled')}"
                                              class="bg-secondary-focus text-secondary-main px-24 py-4 rounded-pill fw-medium text-sm"
                                              th:text="${order.status != null ? order.status : 'Unknown'}">Unknown</span>
                                    </td>
                                </tr>
                                <tr th:if="${recentOrders == null or recentOrders.isEmpty()}">
                                    <td colspan="6" class="text-center text-secondary-light">No recent orders</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-3">
                <div class="card h-100" style="margin-bottom: 8px;">
                    <div class="card-body" style="padding: 10px 14px;">
                        <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-1">
                            <h6 class="mb-0 fw-bold" style="font-size: 14px;">Transactions</h6>
                            <span class="text-sm text-secondary-light" style="font-size: 10px;">Processing Orders</span>
                        </div>

                        <div style="margin-top: 6px;">
                            <div class="d-flex align-items-center justify-content-between gap-2 mb-1" th:each="order : ${processingOrders}" style="padding: 4px 0;">
                                <div class="d-flex align-items-center gap-2">
                                    <div class="w-40-px h-40-px radius-8 flex-shrink-0 bg-primary-light d-flex align-items-center justify-content-center">
                                        <iconify-icon icon="solar:document-text-linear" class="text-primary-600"></iconify-icon>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="text-md mb-0 fw-normal" th:text="${order.user != null ? (order.user.fullName != null ? order.user.fullName : order.user.username) : 'Guest'}">Customer</h6>
                                        <span class="text-sm text-secondary-light fw-normal" th:text="|Order #${order.orderId}|">Order #0</span>
                                    </div>
                                </div>
                                <span class="text-success-main text-md fw-medium" 
                                      th:text="|${#numbers.formatDecimal(order.totalAmount != null ? order.totalAmount : 0, 0, 'COMMA', 2, 'POINT')} $|">0.00 $</span>
                            </div>
                            <div th:if="${processingOrders == null or processingOrders.isEmpty()}" class="text-center text-secondary-light py-4">
                                No processing orders
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-5 col-lg-6">
                <div class="card radius-8 border-0" style="margin-bottom: 4px;">
                    <div class="card-body" style="padding: 12px 16px;">
                        <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-1">
                            <h6 class="mb-0 fw-bold" style="font-size: 15px;">Distribution Maps</h6>
                            <div class="">
                                <select class="form-select form-select-sm w-auto bg-base border text-secondary-light radius-8" 
                                        style="font-size: 11px; padding: 4px 8px;"
                                        onchange="window.location.href='/admin/dashboard?period=' + this.value + '&revenuePeriod=' + document.getElementById('revenuePeriod').value">
                                    <option value="yearly" th:selected="${period == 'yearly'}">Yearly</option>
                                    <option value="monthly" th:selected="${period == 'monthly'}">Monthly</option>
                                    <option value="weekly" th:selected="${period == 'weekly'}">Weekly</option>
                                    <option value="today" th:selected="${period == 'today'}">Today</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="world-map" style="height: 240px;"></div>

                    <div class="card-body" style="padding: 12px 16px; max-height: 200px; overflow-y: auto;">
                        <div th:if="${countryDistribution != null and countryDistribution.sortedCountries != null}">
                            <div class="d-flex align-items-center justify-content-between gap-2 mb-0" 
                                 th:each="country : ${countryDistribution.sortedCountries}" 
                                 style="padding: 4px 0;">
                                <div class="d-flex align-items-center w-100">
                                    <div class="w-32-px h-32-px rounded-circle flex-shrink-0 me-2 d-flex align-items-center justify-content-center" 
                                         style="width: 32px; height: 32px; background: #f3f4f6; border: 1px solid #e5e7eb; font-size: 18px;">
                                        <span th:text="${country.flag != null ? country.flag : country.code}">ðŸ‡ºðŸ‡¸</span>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-0" style="font-size: 14px;" th:text="${country.name}">Country</h6>
                                        <span class="text-secondary-light fw-medium" style="font-size: 12px;" 
                                              th:text="|${country.count} Orders|">0 Orders</span>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center gap-2 w-100">
                                    <div class="w-100 max-w-80 ms-auto">
                                        <div class="progress progress-sm rounded-pill" role="progressbar"
                                             th:attr="aria-valuenow=${country.percentage != null ? country.percentage.intValue() : 0}"
                                             aria-valuemin="0" aria-valuemax="100">
                                            <div class="progress-bar bg-primary-600 rounded-pill"
                                                 th:style="|width: ${country.percentage != null ? country.percentage : 0}%;|"></div>
                                        </div>
                                    </div>
                                    <span class="text-secondary-light fw-semibold" style="font-size: 12px; min-width: 40px;"
                                          th:text="|${#numbers.formatDecimal(country.percentage != null ? country.percentage : 0, 1, 'POINT', 1, 'POINT')}%|">0%</span>
                                </div>
                            </div>
                        </div>
                        <div th:if="${countryDistribution == null or countryDistribution.sortedCountries == null or countryDistribution.sortedCountries.isEmpty()}" class="text-center text-secondary-light py-4">
                            No country data available
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-7 col-lg-6">
                <div class="card h-100" style="margin-bottom: 4px;">
                    <div class="card-body" style="padding: 12px 16px;">
                        <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-1">
                            <h6 class="mb-0 fw-bold" style="font-size: 15px;">Top Selling Product</h6>
                            <a th:href="@{/admin/books(page=0, size=6, sortBy='bookId', sortDir='asc')}"
                               class="text-primary-600 hover-text-primary d-flex align-items-center gap-1" style="font-size: 11px;">
                                View All
                                <iconify-icon icon="solar:alt-arrow-right-linear" class="icon"></iconify-icon>
                            </a>
                        </div>
                        <div class="table-responsive scroll-sm">
                            <table class="table bordered-table mb-0" style="font-size: 13px;">
                                <thead>
                                <tr>
                                    <th scope="col" style="padding: 10px 8px;">Items</th>
                                    <th scope="col" style="padding: 10px 8px;">Price</th>
                                    <th scope="col" style="padding: 10px 8px;">Discount</th>
                                    <th scope="col" style="padding: 10px 8px;">Sold</th>
                                    <th scope="col" class="text-center" style="padding: 10px 8px;">Total Orders</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="product : ${topSellingProducts}">
                                    <td style="padding: 10px 8px;">
                                        <div class="d-flex align-items-center">
                                            <img th:if="${product.book.imageUrl != null}" 
                                                 th:src="${product.book.imageUrl}" 
                                                 alt="Book Image"
                                                 class="flex-shrink-0 me-2 radius-8 object-fit-cover" style="width: 36px; height: 36px;">
                                            <div class="flex-grow-1">
                                                <h6 class="mb-0 fw-bold" style="font-size: 12px;" th:text="${product.book.title}">Book Title</h6>
                                                <span class="text-secondary-light fw-normal" style="font-size: 11px;" 
                                                      th:text="${product.book.category != null ? product.book.category.name : 'Uncategorized'}">Category</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 10px 8px;" th:text="|${#numbers.formatDecimal(product.book.price != null ? product.book.price : 0, 0, 'COMMA', 2, 'POINT')} $|">0.00 $</td>
                                    <td style="padding: 10px 8px;">
                                        <span th:if="${product.book.discountPercent != null and product.book.discountPercent > 0}" 
                                              th:text="|${#numbers.formatDecimal(product.book.discountPercent, 0, 'POINT', 0, 'POINT')}%|">0%</span>
                                        <span th:if="${product.book.discountPercent == null or product.book.discountPercent == 0}">N/A</span>
                                    </td>
                                    <td style="padding: 10px 8px;" th:text="${product.totalSold}">0</td>
                                    <td class="text-center" style="padding: 10px 8px;">
                                        <span class="bg-success-focus text-success-main px-2 py-1 rounded-pill fw-medium" style="font-size: 11px;" 
                                              th:text="${product.totalOrders}">0</span>
                                    </td>
                                </tr>
                                <tr th:if="${topSellingProducts == null or topSellingProducts.isEmpty()}">
                                    <td colspan="5" class="text-center text-secondary-light">No products sold yet</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-7 col-lg-6">
                <div class="card h-100" style="margin-bottom: 4px;">
                    <div class="card-body" style="padding: 12px 16px;">
                        <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between mb-1">
                            <h6 class="mb-0 fw-bold" style="font-size: 15px;">Stock Report</h6>
                            <a th:href="@{/admin/inventory/stock(page=0, size=10)}"
                               class="text-primary-600 hover-text-primary d-flex align-items-center gap-1" style="font-size: 11px;">
                                View All
                                <iconify-icon icon="solar:alt-arrow-right-linear" class="icon"></iconify-icon>
                            </a>
                        </div>
                        <div class="table-responsive scroll-sm">
                            <table class="table bordered-table mb-0" style="font-size: 13px;">
                                <thead>
                                <tr>
                                    <th scope="col" style="padding: 10px 8px;">Items</th>
                                    <th scope="col" style="padding: 10px 8px;">Price</th>
                                    <th scope="col" style="padding: 10px 8px;">
                                        <div class="max-w-112 mx-auto">
                                            <span>Stock</span>
                                        </div>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="book, iterStat : ${stockReport}" th:if="${iterStat.index < 5}">
                                    <td style="padding: 10px 8px;" th:text="${book.title}">Book Title</td>
                                    <td style="padding: 10px 8px;" th:text="|${#numbers.formatDecimal(book.price != null ? book.price : 0, 0, 'COMMA', 2, 'POINT')} $|">0.00 $</td>
                                    <td style="padding: 10px 8px;">
                                        <div class="max-w-112 mx-auto">
                                            <div class="w-100">
                                                <div class="progress progress-sm rounded-pill" role="progressbar"
                                                     aria-valuemin="0" aria-valuemax="100"
                                                     th:attr="aria-valuenow=${book.stock > 100 ? 100 : book.stock}">
                                                    <div class="progress-bar rounded-pill"
                                                         th:classappend="${book.stock == 0} ? 'bg-primary-600' : (${book.stock < 10} ? 'bg-danger-main' : 'bg-success-main')"
                                                         th:style="|width: ${book.stock > 100 ? 100 : book.stock}%;|"></div>
                                                </div>
                                            </div>
                                            <span class="text-secondary-light fw-medium" style="font-size: 11px; margin-top: 5px; display: block;"
                                                  th:if="${book.stock == 0}">Out of Stock</span>
                                            <span class="text-secondary-light fw-medium" style="font-size: 11px; margin-top: 5px; display: block;"
                                                  th:if="${book.stock > 0 and book.stock < 10}"
                                                  th:text="|${book.stock} Low Stock|">Low Stock</span>
                                            <span class="text-secondary-light fw-medium" style="font-size: 11px; margin-top: 5px; display: block;"
                                                  th:if="${book.stock >= 10}"
                                                  th:text="|${book.stock} High Stock|">High Stock</span>
                                        </div>
                                    </td>
                                </tr>
                                <tr th:if="${stockReport == null or stockReport.isEmpty()}">
                                    <td colspan="3" class="text-center text-secondary-light">No stock data available</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <footer class="d-footer">
        <div class="row align-items-center justify-content-between">
            <div class="col-auto">
                <p class="mb-0">Â© 2025 by Group 7 CPL_Java07.</p>
            </div>
            <div class="col-auto">
                <p class="mb-0">Made by <span class="text-primary-600">us</span></p>
            </div>
        </div>
    </footer>
</main>

<div th:replace="common/admin/js :: js"></div>

<script th:inline="javascript">
    /*<![CDATA[*/
    
    // Order Status Distribution Pie Chart
    var orderStatusData = /*[[${orderStatusDistribution}]]*/ {};
    var orderStatusSeries = [];
    var orderStatusLabels = [];
    var orderStatusColors = ['#2563eb', '#f59e0b', '#10b981', '#ef4444', '#8b5cf6', '#ec4899'];
    
    var colorIndex = 0;
    for (var status in orderStatusData) {
        if (orderStatusData.hasOwnProperty(status)) {
            orderStatusSeries.push(orderStatusData[status]);
            // Capitalize first letter
            orderStatusLabels.push(status.charAt(0).toUpperCase() + status.slice(1));
            colorIndex++;
        }
    }
    
    var orderStatusOptions = {
        series: orderStatusSeries,
        chart: {
            type: 'pie',
            height: 240
        },
        labels: orderStatusLabels,
        colors: orderStatusColors,
        legend: {
            position: 'bottom'
        },
        dataLabels: {
            enabled: true,
            formatter: function(val) {
                return val.toFixed(1) + "%";
            }
        }
    };
    
    var orderStatusChart = new ApexCharts(document.querySelector("#orderStatusPieChart"), orderStatusOptions);
    orderStatusChart.render();
    
    // Revenue by Category Pie Chart
    var revenueCategoryData = /*[[${revenueByCategory}]]*/ {};
    var revenueCategorySeries = [];
    var revenueCategoryLabels = [];
    var revenueCategoryColors = ['#2563eb', '#f59e0b', '#10b981', '#ef4444', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];
    
    var totalRevenue = 0;
    for (var category in revenueCategoryData) {
        if (revenueCategoryData.hasOwnProperty(category)) {
            totalRevenue += revenueCategoryData[category];
        }
    }
    
    colorIndex = 0;
    for (var category in revenueCategoryData) {
        if (revenueCategoryData.hasOwnProperty(category)) {
            revenueCategorySeries.push(revenueCategoryData[category]);
            revenueCategoryLabels.push(category);
            colorIndex++;
        }
    }
    
    var revenueCategoryOptions = {
        series: revenueCategorySeries,
        chart: {
            type: 'pie',
            height: 240
        },
        labels: revenueCategoryLabels,
        colors: revenueCategoryColors,
        legend: {
            position: 'bottom'
        },
        dataLabels: {
            enabled: true,
            formatter: function(val) {
                return val.toFixed(1) + "%";
            }
        },
        tooltip: {
            y: {
                formatter: function(val) {
                    return val.toFixed(2) + " $";
                }
            }
        }
    };
    
    var revenueCategoryChart = new ApexCharts(document.querySelector("#revenueByCategoryPieChart"), revenueCategoryOptions);
    revenueCategoryChart.render();
    
    // World Map
    var countryDistributionData = /*[[${countryDistribution}]]*/ {};
    
    if (countryDistributionData && countryDistributionData.countryData) {
        var markers = [];
        var regionValues = {};
        var colors = ['#2563eb', '#f59e0b', '#10b981', '#ef4444', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16', '#f97316', '#6366f1'];
        var colorIndex = 0;
        
        for (var code in countryDistributionData.countryData) {
            if (countryDistributionData.countryData.hasOwnProperty(code)) {
                var country = countryDistributionData.countryData[code];
                if (country.count > 0) {
                    markers.push({
                        latLng: [country.lat, country.lng],
                        name: country.name + ' : ' + country.count + ' Orders'
                    });
                    regionValues[code] = colors[colorIndex % colors.length];
                    colorIndex++;
                }
            }
        }
        
        $('#world-map').vectorMap({
            map: 'world_mill_en',
            backgroundColor: 'transparent',
            borderColor: '#fff',
            borderOpacity: 0.25,
            borderWidth: 0,
            color: '#000000',
            regionStyle: {
                initial: {
                    fill: '#D1D5DB'
                }
            },
            markerStyle: {
                initial: {
                    r: 5,
                    'fill': '#fff',
                    'fill-opacity': 1,
                    'stroke': '#000',
                    'stroke-width': 1,
                    'stroke-opacity': 0.4
                }
            },
            markers: markers,
            series: {
                regions: [{
                    values: regionValues,
                    attribute: 'fill'
                }]
            },
            hoverOpacity: null,
            normalizeFunction: 'linear',
            zoomOnScroll: false,
            scaleColors: ['#000000', '#000000'],
            selectedColor: '#000000',
            selectedRegions: [],
            enableZoom: false,
            hoverColor: '#fff'
        });
    }
    
    // Monthly Orders Chart
    var monthlyOrderStats = /*[[${monthlyOrderStats}]]*/ {};
    
    if (monthlyOrderStats && monthlyOrderStats.monthlyOrders && monthlyOrderStats.monthLabels) {
        var monthlyOrdersData = monthlyOrderStats.monthlyOrders;
        var monthLabelsData = monthlyOrderStats.monthLabels;
        
        // Sort months chronologically
        var sortedMonths = Object.keys(monthlyOrdersData).sort();
        var chartLabels = [];
        var chartData = [];
        
        for (var i = 0; i < sortedMonths.length; i++) {
            var monthKey = sortedMonths[i];
            chartLabels.push(monthLabelsData[monthKey] || monthKey);
            chartData.push(monthlyOrdersData[monthKey] || 0);
        }
        
        var monthlyOrdersOptions = {
            series: [{
                name: 'Orders',
                data: chartData
            }],
            chart: {
                type: 'bar',
                height: 200,
                toolbar: {
                    show: false
                }
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '55%',
                    borderRadius: 4
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 2,
                colors: ['transparent']
            },
            xaxis: {
                categories: chartLabels,
                labels: {
                    rotate: -45,
                    style: {
                        fontSize: '11px'
                    }
                }
            },
            yaxis: {
                title: {
                    text: 'Number of Orders'
                }
            },
            fill: {
                opacity: 1,
                colors: ['#2563eb']
            },
            tooltip: {
                y: {
                    formatter: function(val) {
                        return val + " orders";
                    }
                }
            },
            colors: ['#2563eb']
        };
        
        var monthlyOrdersChart = new ApexCharts(document.querySelector("#monthlyOrdersChart"), monthlyOrdersOptions);
        monthlyOrdersChart.render();
    }
    
    /*]]>*/
</script>

</body>

<!-- Mirrored from wowdash.wowtheme7.com/demo/index-3.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Nov 2025 02:07:19 GMT -->
</html>



